<section id="best-offers-{{ position }}-slider" class="s-block s-block--best-offers container overflow-hidden">
  {% if products|length %}
    <salla-products-slider
            source="selected"
            limit="{{ limit }}"
            autoplay="false"  <!-- ุชุนุทูู ุงูุชุดุบูู ุงูุชููุงุฆู ุงูุงูุชุฑุงุถู -->
            source-value="[{{ products|map((product) => product.id)|join(',') }}]"
            display-all-url="{{display_all_url}}"
            block-title="{{ title }}"
            block-subTitle="{{ sub_title|raw }}"
            slider-id="slider-with-bg-{{ position }}"
    ></salla-products-slider>
  {% endif %}
</section>

<script>
  document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
        let sliderElement = document.querySelector("salla-products-slider");

        if (sliderElement) {
            let checkSwiper = setInterval(() => {
                if (sliderElement.swiper) {
                    clearInterval(checkSwiper);
                    let swiperInstance = sliderElement.swiper;
                    
                    swiperInstance.autoplay.stop(); // ุฅููุงู ุงูุชุดุบูู ุงูุชููุงุฆู ุงูุงูุชุฑุงุถู

                    startCustomAnimation(swiperInstance);
                }
            }, 500);
        } else {
            console.warn("ูู ูุชู ุงูุนุซูุฑ ุนูู ุนูุตุฑ ุงูุณูุงูุฏุฑ.");
        }
    }, 500);
  });

  function startCustomAnimation(swiper) {
      console.log("ุชู ุชุญููู ุงูุณูุงูุฏุฑ! ๐");

      function moveSlider() {
          swiper.slideNext(800); // ุชุญุฑู ุณุฑูุน ููุฏุฉ 0.8 ุซุงููุฉ
          setTimeout(() => {
              swiper.slideNext(600); // ุญุฑูุฉ ุฃุจุทุฃ ููุฏุฉ 0.6 ุซุงููุฉ
              setTimeout(() => {
                  swiper.autoplay.stop(); // ุชููู ูุคูุช ููุญุฑูุฉ
                  console.log("โธ๏ธ ุชููู ููุฏุฉ ุซุงููุฉ...");
                  setTimeout(() => {
                      swiper.autoplay.start(); // ุงุณุชุฆูุงู ุงูุญุฑูุฉ
                      console.log("โถ๏ธ ุงุณุชุฆูุงู ุงูุญุฑูุฉ...");
                      moveSlider(); // ุฅุนุงุฏุฉ ุชุดุบูู ุงูุญุฑูุฉ ุงููุฎุตุตุฉ
                  }, 1000); // ุชููู ููุฏุฉ ุซุงููุฉ
              }, 1200); // ุงูุชุญุฑู ููุฏุฉ 1.2 ุซุงููุฉ ุซู ุงูุชููู
          }, 1600); // ุจุนุฏ ุงูุญุฑูุฉ ุงูุฃููู ููุชูู ููุซุงููุฉ
      }

      moveSlider(); // ุชุดุบูู ุงูุญุฑูุฉ ูุฃูู ูุฑุฉ
  }
</script>
